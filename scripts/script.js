const randomKiwi = {};

// Function for generating a random number 

randomKiwi.randomItemFromData = function(array) {
    const randomNumber = Math.floor(Math.random() * this.dataBase.length);
    return array[randomNumber];
}

let userClick = '';

// listen for user event on button click for main button
randomKiwi.buttonClick = function(){
    $('.mainButton').on('submit', function(event) {
        event.preventDefault();
        
        // generate a random number and use get a index of the array
        userClick = randomKiwi.randomItemFromData(randomKiwi.dataBase);

        
        // display matching word and definition to user by adding to html
        $('.results').html(`<h2>${userClick.word}</h2>`);
        $('.quiz').html(`<fieldset><legend>What do you think ${userClick.word} means?</legend>${userClick.q1} ${userClick.q2} ${userClick.q3}</fieldset>
        <div class="quizButton button">
                <label class="visuallyHidden" for="quizButton">Click the button to submit your answer!</label>
                <input type="submit" class="submit" value="Submit!" id="quizButton" data-hash="#final">
        </div>`);
        // Clear the content in bottom section generated by previous click.
        $('.final').html(``);
        randomKiwi.smoothScroll('.quiz');
    });    
}

randomKiwi.smoothScroll = function (clickedButton) {
    $(clickedButton).on('submit', function (event) {
        // store content of data hash (which refers to the new location)
        const resultsPage = $(`${clickedButton} .submit`).data('hash');

        // if there is something in the hash prevent default behavior and then
        if (resultsPage !== '') {
            event.preventDefault();
            //  and then animate the change in locations to the new location
            $('html, body').animate({
                scrollTop: $(resultsPage).offset().top
            }, 600, function () {
                window.location.hash = "resultsPage";
            });
        }

    });
}

// fix for page refresh to move to top
randomKiwi.resetHash = function () {
    window.location.hash = "";
}

// event listener for quiz
randomKiwi.quizClick = function(){
    $('.quiz').on("submit", function(event){
        event.preventDefault();
        // console.log("is this working");

        const userAnswer = $('input[name=quest]:checked').val();
        // console.log(userAnswer);

        if (userAnswer === 'true') {
            $('.final').html(`<p>You were <span class="RW">right</span>, heres the definition:</p><p>${userClick.definition}</p>
            <div class="topButton button">
                <label class="visuallyHidden" for="quizButton">Click the button to go back to top!</label>
                <input type="submit" class="submit" value="Another Kiwi!" id="quizButton" data-hash="#top">
            </div>`)
            randomKiwi.smoothScroll('.final');
        } else if (userAnswer === 'false'){
            $('.final').html(`<p>Sorry thats <span class="RW">wrong</span>, heres the definition:</p><p>${userClick.definition}</p>
            <div class="topButton button">
                <label class="visuallyHidden" for="quizButton">Click the button to go back to top!</label>
                <input type="submit" class="submit" value="Another Kiwi!" id="quizButton" data-hash="#top">
            </div>`)
            randomKiwi.smoothScroll('.final');
        } else {
            $('.final').html(`<p>Please choose an answer.</p>
            <div class="topButton button">
                <label class="visuallyHidden" for="quizButton">Click the button to go back to quiz!</label>
                <input type="submit" class="submit" value="Back to Quiz" id="quizButton" data-hash="#results">
            </div>`)
            randomKiwi.smoothScroll('.final');
        }
    });

}

$(function(){
    // $(window).scrollTop(0);
    randomKiwi.resetHash();
    randomKiwi.smoothScroll('.mainButton');
    randomKiwi.buttonClick();
    randomKiwi.quizClick();
});
